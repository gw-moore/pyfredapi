# content of: tox.ini , put in same dir as setup.py
[tox]
isolated_build = True
envlist = py{38,39,310}, lint, pytest-cov

[tox:.package]
# note tox will use the same python version as under what tox is installed to package
# so unless this is python 3 you can require a given python version for the packaging
# environment via the basepython key
basepython = python3

[testenv]
deps =
    pytest
    pytest-vcr
passenv = PYTHON_VERSION, FRED_API_KEY
commands =
    pytest tests/

[testenv:pytest-cov]
basepython = python3.10
deps =
    pytest
    coverage
    pytest-cov
    pytest-vcr
passenv = PYTHON_VERSION, FRED_API_KEY
commands =
    pytest --cov=pyfredapi tests/  --cov-report html:htmlcov --cov-report term

[testenv:lint]
basepython = python3.10
deps =
    flake8
    flake8-bandit
    flake8-docstrings
    isort
    black

commands =
    isort pyfredapi
    isort tests
    black .
    flake8 .

; [testenv:mypy]
; basepython = python3.10
; deps =
;     mypy
;     types-requests
;     types-setuptools
;     pandas-stubs
;     pydantic

; commands =
;     mypy pyfredapi
